<!DOCTYPE html>




<html class="theme-next tumo" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.1">








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/tumo.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <meta name="keywords" content="spring-cloud,">










<meta name="description" content="Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯é¡¹ç›®åœ°å€ï¼šSpring-Cloud-Template æ¬¢è¿star, forkæ”¯æŒä½œè€… æ³¨æ„ è¯·ä»”ç»†é˜…è¯»vue-admin-templateé¡¹ç›®å®˜æ–¹æ–‡æ¡£ï¼šä¼ é€é—¨ å¦‚ä½•é£Ÿç”¨ vue-admin-template å‰ç«¯æ¨¡æ¿ï¼Ÿ">
<meta name="keywords" content="spring-cloud">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Cloud Templateå¾®æœåŠ¡å‰ç«¯">
<meta property="og:url" content="http://www.tycoding.cn/2019/05/30/cloud/cloud-template-app/index.html">
<meta property="og:site_name" content="TyCoding&#39;s Blog">
<meta property="og:description" content="Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯é¡¹ç›®åœ°å€ï¼šSpring-Cloud-Template æ¬¢è¿star, forkæ”¯æŒä½œè€… æ³¨æ„ è¯·ä»”ç»†é˜…è¯»vue-admin-templateé¡¹ç›®å®˜æ–¹æ–‡æ¡£ï¼šä¼ é€é—¨ å¦‚ä½•é£Ÿç”¨ vue-admin-template å‰ç«¯æ¨¡æ¿ï¼Ÿ">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094048.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094052.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094057.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094105.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094110.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094116.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094122.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094131.png">
<meta property="og:image" content="http://cdn.tycoding.cn/20200629094140.png">
<meta property="og:updated_time" content="2020-06-29T01:41:45.421Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Cloud Templateå¾®æœåŠ¡å‰ç«¯">
<meta name="twitter:description" content="Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯é¡¹ç›®åœ°å€ï¼šSpring-Cloud-Template æ¬¢è¿star, forkæ”¯æŒä½œè€… æ³¨æ„ è¯·ä»”ç»†é˜…è¯»vue-admin-templateé¡¹ç›®å®˜æ–¹æ–‡æ¡£ï¼šä¼ é€é—¨ å¦‚ä½•é£Ÿç”¨ vue-admin-template å‰ç«¯æ¨¡æ¿ï¼Ÿ">
<meta name="twitter:image" content="http://cdn.tycoding.cn/20200629094048.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Tumo',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.tycoding.cn/2019/05/30/cloud/cloud-template-app/">





  <title>Spring Cloud Templateå¾®æœåŠ¡å‰ç«¯ | TyCoding's Blog</title>
  









  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?fd6f88c80cfe71fa4943c52397fc01cd";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

<body itemscope itemtype="http://schema.org/WebPage" style="overflow-x:hidden;padding-right:320px" lang="en">

  <style>@media (min-width:768px) and (max-width:991px){body .header-innerr{width:700px!important}}.header-innerr{margin:0 auto;padding:100px 0 70px;width:880px}@media (min-width:1600px){.container .header-innerr{width:1200px}}.header-innerr{position:relative}.header-innerr{padding:20px 0 0}.header-innerr:after,.header-innerr:before{content:" ";display:table}.header-innerr:after{clear:both}@media (max-width:767px){.header-innerr{width:auto;padding:10px;margin-bottom:-20px}}</style>

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    
    

    <link href="/lib/font-awesome/css/font-merienda.css?v=4.6.2" rel="stylesheet" type="text/css">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title" style="font-family:Merienda;font-size:1.3rem">TyCoding's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ç”Ÿæ´»çš„æ´ªæµè®©äººä»¬çª’æ¯ï¼Œæˆ‘ä»¬å´åœ¨ç¼ºæ°§çš„ç¯å¢ƒä¸­è‚†æ„æˆé•¿</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">

  
    <ul id="menu" class="menu">
      
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            HOME
          </a>
        </li>
      
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            ARCHIVES
          </a>
        </li>
      
        
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            ABOUT
          </a>
        </li>
      
        
        
        <li class="menu-item menu-item-links">
          <a href="/links/" rel="section">
            LINKS
          </a>
        </li>
      

    </ul>
  

</nav>



 </div>

      <div class="header-innerr">
        
          <div class="note info" style="margin:0;letter-spacing:.15px">
            ğŸ¤SpringCloudåˆ†å¸ƒå¼é¡¹ç›®è„šæ‰‹æ¶ï¼š
            <a style="color:#40dab2;font-weight:600" href="https://github.com/TyCoding/cloud-template" target="_blank" class="animsition-link">
              https://github.com/TyCoding/cloud-template
            </a>
          </div>
        
      </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.tycoding.cn/2019/05/30/cloud/cloud-template-app/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TyCoding">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TyCoding's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Spring Cloud Templateå¾®æœåŠ¡å‰ç«¯</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-30T07:46:17+08:00">
                2019-05-30
              </time>
            
          </span>

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Spring-Cloud-Template-åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ-â€“-å‰ç«¯"><a href="#Spring-Cloud-Template-åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ-â€“-å‰ç«¯" class="headerlink" title="Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯"></a>Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯</h1><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/TyCoding/cloud-template" target="_blank" rel="noopener">Spring-Cloud-Template</a> æ¬¢è¿star, forkæ”¯æŒä½œè€…</p>
<p><strong>æ³¨æ„</strong></p>
<p>è¯·ä»”ç»†é˜…è¯»<code>vue-admin-template</code>é¡¹ç›®å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/" target="_blank" rel="noopener">ä¼ é€é—¨</a></p>
<p>å¦‚ä½•é£Ÿç”¨ <code>vue-admin-template</code> å‰ç«¯æ¨¡æ¿ï¼Ÿ</p>
<a id="more"></a>

<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><blockquote>
<p>å› ä¸ºè¯¥æ¨¡æ¿ç”¨mockæ¨¡æ‹Ÿäº†å‰ç«¯æ‰€éœ€æ•°æ®ï¼Œé¦–å…ˆè¦åˆ é™¤mockç›¸å…³çš„é…ç½®</p>
</blockquote>
<ul>
<li>åˆ é™¤<code>mock</code>æ–‡ä»¶å¤¹</li>
<li>åˆ é™¤<code>/src/main.js</code>ä¸‹è¿™æ®µä»£ç ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mockXHR &#125; <span class="keyword">from</span> <span class="string">'../mock'</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">  mockXHR()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ é™¤<code>vue-config.js</code>ä¸‹è¿™æ®µä»£ç ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">after: <span class="built_in">require</span>(<span class="string">'./mock/mock-server.js'</span>)</span><br></pre></td></tr></table></figure>

<p>å…¨å±€é…ç½®åç«¯æ¥å£URLï¼Œä»¥ä¸‹é…ç½®æ–‡ä»¶ä¸­éƒ½å­˜åœ¨ä¸€ä¸ª<code>VUE_APP_BASE_API</code>é…ç½®ï¼Œä»–æŒ‡å®šäº†åç«¯è¯·æ±‚çš„URLæ ¹è·¯å¾„ã€‚æ¯”å¦‚æˆ‘ä»¬åç«¯çš„è¯·æ±‚éƒ½æ˜¯<code>http://localhost:9999/api/xx</code>çš„ï¼Œæ‰€ä»¥å¯è®¾ç½®<code>VUE_APP_BASE_API=&#39;http://localhost:9999/api/&#39;</code>ï¼Œå…¶ä¸­<code>/xx</code>å…·ä½“çš„æ¥å£è¯·æ±‚æ”¾åœ¨<code>/src/api/*.js</code>ä¸­ã€‚</p>
<ul>
<li><code>.env.development</code>: å³<code>dev</code>å¼€å‘ç¯å¢ƒ</li>
<li><code>.env.production</code>: å³<code>prod</code>ç”Ÿäº§ç¯å¢ƒ</li>
<li><code>.env.staging</code>: å³<code>mock</code>æ¨¡æ‹Ÿç¯å¢ƒ</li>
</ul>
<p>æ³¨æ„ï¼šåœ¨SpringCloudå¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œå‰ç«¯çš„æ‰€æœ‰è¯·æ±‚éƒ½åº”è¯¥èµ°Gatewayç½‘å…³æœåŠ¡çš„URLåœ°å€ã€‚</p>
<h3 id="å–æ¶ˆESLintæ ¡éªŒ"><a href="#å–æ¶ˆESLintæ ¡éªŒ" class="headerlink" title="å–æ¶ˆESLintæ ¡éªŒ"></a>å–æ¶ˆESLintæ ¡éªŒ</h3><p>åœ¨ä½ å¼€å‘é¡¹ç›®ä¸­å¯èƒ½é‡åˆ°å‰ç«¯è«åå…¶å¦™æŠ¥é”™è¯­æ³•ä¸å¯¹ï¼Œæ¯”å¦‚å¤šä¸€ä¸ªç©ºæ ¼ã€å†’å·å•¥çš„ï¼Œè¿™éƒ½æ˜¯å› ä¸º<code>vue-admin-template</code>è¿™ä¸ªæ¨¡æ¿å¯ç”¨äº†ESLintæœ€ä¸¥æ ¼æ¨¡å¼ï¼Œå…¶å®æˆ‘ä»¬å…³é—­ESLintæ£€æŸ¥å³å¯ï¼š</p>
<p>ä¿®æ”¹<code>vue.config.js</code>ä¸­å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹å‰ï¼š</span><br><span class="line">  lintOnSave: process.env.NODE_ENV === &apos;development&apos;,</span><br><span class="line">  </span><br><span class="line">ä¿®æ”¹åï¼š</span><br><span class="line">  lintOnSave: false,</span><br></pre></td></tr></table></figure>

<h2 id="ç™»å½•åŠŸèƒ½"><a href="#ç™»å½•åŠŸèƒ½" class="headerlink" title="ç™»å½•åŠŸèƒ½"></a>ç™»å½•åŠŸèƒ½</h2><p>æ‹¿åˆ°çš„é¡¹ç›®æ¨¡æ¿ï¼Œé¦–å…ˆéœ€è¦è§£å†³çš„å°±æ˜¯ç™»å½•åŠŸèƒ½ã€‚æŒ‰ç…§ <a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/" target="_blank" rel="noopener">vue-admin-template</a> å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å°†ç»è¿‡å¦‚ä¸‹æµç¨‹ï¼š</p>
<pre><code>1. `.vue` é¦–å…ˆæ˜¯Vueç»„ä»¶å†…éƒ¨å‘é€äº†è¯·æ±‚
 2. `src/utils/request.js` ä½œè€…å¯¹ axios è¯·æ±‚å…¨å±€çš„å°è£…
 3. `src/api/xx.js` vueç»„ä»¶ä½¿ç”¨çš„æ¥å£åœ°å€ï¼Œé…åˆ`request.js`å®Œæˆaxiosè¯·æ±‚ä¸ç›¸åº”
 4. `src/store/modules/user.js` è¿™ä¸ªå°¤ä¸ºé‡è¦ï¼Œç™»å½•æ¥å£ä¸åŒäºå…¶ä»–æ¥å£ï¼Œå½“ç™»å½•æˆåŠŸåï¼Œéœ€è¦ä½¿ç”¨vuexå°†ç™»å½•æ¥å£å“åº”çš„æ•°æ®ä¿å­˜ï¼Œä»¥ä¾¿ç»´æŒä¸åç«¯çš„ä¼šè¯é€šä¿¡ã€‚</code></pre><p>é‚£ä¹ˆï¼Œç™»å½•åŠŸèƒ½ä¸åŒäºå…¶ä»–çš„CRUDä¸šåŠ¡æµç¨‹ï¼Œåœ¨<code>vue-admin-template</code>ä¸­ç™»å½•éœ€è¦åå°æä¾›ï¼š</p>
<ol>
<li>ç™»å½•æ¥å£</li>
<li>è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£</li>
</ol>
<p>è¿™åˆšå¥½ç¬¦åˆäº†æˆ‘ä»¬ä½¿ç”¨çš„Security-OAuth2æ¡†æ¶ã€‚åœ¨Security-OAuth2æ¡†æ¶æ±‡æ€»ï¼Œé»˜è®¤æä¾›äº†è·å–Tokençš„æ¥å£(ç™»å½•æ¥å£)ï¼Œæˆ‘ä»¬ä»…éœ€è¦è°ƒç”¨è¿™ä¸ªæ¥å£å³å¯å®ç°ç™»å½•ã€‚</p>
<h3 id="ç™»å½•æ¥å£"><a href="#ç™»å½•æ¥å£" class="headerlink" title="ç™»å½•æ¥å£"></a>ç™»å½•æ¥å£</h3><p>å¦‚æœä½ å¯¹Security-OAuth2è¿˜ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®çœ‹ä¸‹æˆ‘ä¹‹å‰å†™çš„æ–‡æ¡£ï¼š</p>
<ol>
<li><a href="https://www.tycoding.cn/2019/04/22/boot/spring-boot-security-oauth2-start/">Spring Security OAuth2æ¦‚å¿µå¼•å…¥</a></li>
<li><a href="https://tycoding.cn/2019/04/22/boot/spring-boot-security-oauth2/" target="_blank" rel="noopener">Spring Security OAuth2å®æˆ˜</a></li>
<li><a href="https://www.tycoding.cn/2019/04/23/boot/spring-boot-security-oauth2-db/">Spring Security OAuth2æ•°æ®æŒä¹…åŒ–</a></li>
</ol>
<p>Security-OAuth2ä¸­æä¾›çš„é»˜è®¤è·å–Tokençš„æ¥å£ï¼š<code>/oauth/token</code>ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨Postmanå·¥å…·æ¨¡æ‹Ÿè¯·æ±‚çš„ç¤ºä¾‹å›¾ï¼š</p>
<p><img src="http://cdn.tycoding.cn/20200629094048.png" alt></p>
<p><img src="http://cdn.tycoding.cn/20200629094052.png" alt></p>
<p><img src="http://cdn.tycoding.cn/20200629094057.png" alt></p>
<blockquote>
<p>  <code>/oauth/token</code>æ¥å£æ˜¯è°æä¾›çš„ï¼Ÿ</p>
</blockquote>
<p>â€‹        åˆ‡è®°ï¼Œ<code>/oauth/token</code>æ¥å£æ˜¯Security-OAuth2å†…éƒ¨æä¾›çš„è·å–Tokençš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰ï¼Œå¹¶ä¸”å³ä½¿ä½¿ç”¨äº†Spring Securityï¼Œ<code>/oauth</code>å¼€å¤´çš„æ¥å£ä¹Ÿåº”ä¸ºæ˜¯å†…ç½®çš„ä¸ä¼šè¢«æ‹¦æˆªï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ— éœ€ç‰¹æ®Šé…ç½®Spring Security ä¸æ‹¦æˆªè¿™ä¸ªæ¥å£ã€‚</p>
<blockquote>
<p>  <code>/oauth/token</code>ç™»å½•è¯·æ±‚éœ€è¦ä¼ å…¥ä»€ä¹ˆå‚æ•°ï¼Ÿ</p>
</blockquote>
<p>â€‹        å…³äºè¿™ç‚¹å¯ä»¥çœ‹ä¸‹æˆ‘çš„ <a href="https://tycoding.cn/" target="_blank" rel="noopener">åšå®¢</a> ä¸­ä¹‹å‰ä»‹ç»OAuth2çš„æ–‡ç« ã€‚æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æä¾›ï¼š</p>
<ol>
<li><code>username</code> ç™»å½•è´¦æˆ·</li>
<li><code>password</code> ç™»å½•å¯†ç ã€‚è¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„OAuthçš„<strong>å¯†ç </strong>æ¨¡å¼ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰</li>
<li><code>grant_type</code> å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„OAuth2çš„å¯†ç æ¨¡å¼ï¼Œå¯ç›´æ¥å®šä¹‰ä¸º<code>grant_type=password</code></li>
<li>Request Headers &gt;&gt; <code>Authorization</code> æ³¨æ„è¿™ä¸ªæ˜¯å®¢æˆ·ç«¯è´¦æˆ·å¯†ç ä¿¡æ¯ï¼Œå¯¹åº”äº†åç«¯<code>ClientDetails</code>ä¸­æŸ¥è¯¢çš„æ•°æ®</li>
</ol>
<blockquote>
<p>  <code>/oauth/token</code> å“åº”ä»€ä¹ˆæ•°æ®ï¼Ÿ</p>
</blockquote>
<p>â€‹        å¦‚ä¸Šå›¾ï¼Œè¯·æ±‚ä¸€èˆ¬å“åº”å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"access_token"</span>: <span class="string">"f59359c1-86c0-48a3-b060-ff97e5163bb2"</span>,</span><br><span class="line">    <span class="attr">"token_type"</span>: <span class="string">"bearer"</span>,</span><br><span class="line">    <span class="attr">"expires_in"</span>: <span class="number">22531</span>,</span><br><span class="line">    <span class="attr">"scope"</span>: <span class="string">"app"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>access_token</code> å°¤ä¸ºé‡è¦ï¼Œåé¢æ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦æºå¸¦è¿™ä¸ªTokenå€¼æ‰èƒ½æ­£å¸¸è®¿é—®ï¼Œå¦åˆ™å°±403æ‹’ç»ã€‚æ‰€ä»¥ï¼Œåœ¨<code>vue-admin-template</code>é¡¹ç›®ä¸­ï¼Œä¸€æ—¦ç™»å½•æ¥å£å“åº”æˆåŠŸï¼Œä¼šå°†è¿”å›çš„Tokenä¿¡æ¯å…¨å±€è®¾ç½®å†è¯·æ±‚å¤´ä¸­ï¼Œè¿™æ ·ä»¥åæ‰€æœ‰çš„è¯·æ±‚ä¸­éƒ½æºå¸¦è¿™ä¸ªè¯·æ±‚éƒ½ä¿¡æ¯ã€‚å…·ä½“å¯ä»¥çœ‹ï¼š<code>src/utils/request.js</code>ä¸­è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.headers[<span class="string">'Authorization'</span>] = getToken()</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å…¨å±€é…ç½®axioså®ä¾‹ï¼Œå› ä¸ºæ‰€æœ‰çš„APIè¯·æ±‚éƒ½éœ€è¦ç»è¿‡è¿™ä¸ª<code>request.js</code>æ–‡ä»¶ï¼Œæ‰€ä»¥å…¶ä¸­çš„é…ç½®é¡¹å¯¹æ‰€æœ‰çš„è¯·æ±‚éƒ½æœ‰æ•ˆã€‚</p>
<blockquote>
<p>  <code>vue-admin-template</code>ä¸­å¦‚ä½•å¤„ç†ç™»å½•æ¥å£å“åº”çš„æ•°æ®ï¼Ÿ</p>
</blockquote>
<p>â€‹        çœ‹å®Œä¸Šé¢çš„é…ç½®ï¼Œä½ è§‰å¾—å·²ç»èƒ½å®Œæˆå‰ç«¯çš„ç™»å½•åŠŸèƒ½äº†ï¼Ÿé‚£ä½ å°±é”™äº†ã€‚ä¸Šé¢ä»…ä»…ä»‹ç»äº†ä½¿ç”¨Postmanå·¥å…·æ¨¡æ‹Ÿæµ‹è¯•ï¼Œè€Œåœ¨<code>vue-admin-template</code>é¡¹ç›®ä¸­ï¼Œå¦‚æœè¯·æ±‚<code>/oauth/token</code>æ¥å£æ­£å¸¸å“åº”æ•°æ®ï¼Œéœ€è¦å°†å“åº”çš„æ•°æ®å‚¨å­˜åˆ°vuexä¸­ã€‚é‚£ä¹ˆä¸»è¦æ¶‰åŠ<code>src/store/modules/user.js</code>ä¸­çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// user login</span></span><br><span class="line">  login(&#123; commit &#125;, userInfo) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; username, password &#125; = userInfo</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      login(&#123; <span class="attr">username</span>: username.trim(), <span class="attr">password</span>: password &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'SET_TOKEN'</span>, response.access_token)</span><br><span class="line">        setToken(response.token_type + <span class="string">' '</span> + response.access_token)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get user info</span></span><br><span class="line">  getInfo(&#123; commit, state &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      getInfo(state.token).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = response</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">          reject(<span class="string">'Verification failed, please Login again.'</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; name, avatar &#125; = data</span><br><span class="line"></span><br><span class="line">        commit(<span class="string">'SET_NAME'</span>, name)</span><br><span class="line">        commit(<span class="string">'SET_AVATAR'</span>, avatar)</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// user logout</span></span><br><span class="line">  logout(&#123; commit, state &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      logout(state.token).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'SET_TOKEN'</span>, <span class="string">''</span>)</span><br><span class="line">        removeToken()</span><br><span class="line">        resetRouter()</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// remove token</span></span><br><span class="line">  resetToken(&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'SET_TOKEN'</span>, <span class="string">''</span>)</span><br><span class="line">      removeToken()</span><br><span class="line">      resolve()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç æ‰æ˜¯ç™»å½•ã€è·å–ç”¨æˆ·ä¿¡æ¯ã€æ³¨é”€åŠŸèƒ½å®ç°çš„æ ¸å¿ƒä»£ç ã€‚å…¶å®å°±æ˜¯åˆ©ç”¨<code>src/api/xx.js</code>ä¸­å®šä¹‰çš„æ¥å£æ–¹æ³•å‘é€axiosè¯·æ±‚ã€‚ç„¶åå°†å“åº”responseæ•°æ®å¤„ç†ä¸€ä¸‹ã€‚</p>
<p>æ¯”å¦‚ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>login()</code>æ–¹æ³•å°±æ˜¯ç™»å½•æ¥å£æ”¾ä»–ï¼Œå®ƒå®é™…è¯·æ±‚äº†<code>/oauth/token</code>æ¥å£ï¼Œå‰é¢æåˆ°æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦æºå¸¦<code>access_token</code>ï¼Œæ‰€ä»¥éœ€è¦vuexå‚¨å­˜tokenä¿¡æ¯(<code>setToken(token)</code>)ï¼Œä»¥ä¾¿åœ¨<code>request.js</code>ä¸­ä½¿ç”¨<code>config.headers[]</code>å…¨å±€å®šä¹‰è¯·æ±‚å¤´ä¿¡æ¯ã€‚</p>
<blockquote>
<p>  åœ¨Postmanä¸­è®¾ç½®çš„<code>Basic Auth</code>ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­åœ¨å“ªä½“ç°å‘¢ï¼Ÿ</p>
</blockquote>
<p>â€‹        å½“ç„¶ï¼ŒæŒ‰ç…§OAuth2åè®®çš„è§„å®šï¼Œæƒ³è¦è·å–åº”ç”¨ä¿¡æ¯å¿…é¡»å…ˆè¯·æ±‚<code>/oauth/token</code>è·å–ä»¤ç‰ŒTokenå€¼ï¼Œè€Œæƒ³è¦è·å–ä»¤ç‰ŒTokené™¤äº†<code>username</code> <code>password</code> <code>grant_type</code>ä¿¡æ¯ï¼Œè¿˜è¦å‘Šè¯‰OAuth2è¿™æ˜¯å“ªä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ‰€ä»¥åœ¨è¯·æ±‚<code>/oauth/token</code>æ¥å£æ—¶éœ€è¦æºå¸¦å®¢æˆ·ç«¯ä¿¡æ¯ã€‚</p>
<p>â€‹        è¿™ä¸€ç‚¹åœ¨ <a href="https://tycoding.cn/2019/04/22/boot/spring-boot-security-oauth2/" target="_blank" rel="noopener">Spring Security OAuth2å®æˆ˜</a> ä¸€æ–‡ä¸­æˆ‘æœ‰è¯¦ç»†ä»‹ç»è¿‡ã€‚æ‰€ä»¥åœ¨<code>vue-admin-template</code>å‰ç«¯é¡¹ç›®ä¸­ï¼Œæƒ³è¦å®ç°æ‰€æœ‰è¯·æ±‚éƒ½æºå¸¦å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œå°±éœ€è¦å…¨å±€è®¾ç½®è¯·æ±‚å¤´å‚æ•°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ <code>src/main.js</code> ä¸­å…¨å±€è®¾ç½®Axios é»˜è®¤è¯·æ±‚å¤´å‚æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">'Authorization'</span>] = <span class="string">'Basic Y2xpZW50OnNlY3JldA=='</span>;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è®¾ç½®äº†ä¸€ä¸ªè¯·æ±‚å¤´å‚æ•°<code>Authorization</code>ï¼Œä»–çš„å€¼æ˜¯å¯¹<code>username: client, password: 123456</code>å³<code>client:123456</code>æŒ‰ç…§Base64åŠ å¯†åçš„å€¼ã€‚å› ä¸ºæ•´ä¸ªé¡¹ç›®ä»…ä»…æ˜¯ä¸ªäººä½¿ç”¨çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå†™æ­»ä¹Ÿå¹¶æ— å¤§ç¢ï¼Œæ¯•ç«Ÿæ•°æ®åº“ä¸­å†™æ­»äº†å®¢æˆ·ç«¯ä¿¡æ¯ã€‚</p>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>ä¸Šé¢åŸºæœ¬ä»‹ç»äº†ç™»å½•è¯·æ±‚çš„æµç¨‹å’Œæ³¨æ„äº‹é¡¹ï¼Œä¸‹é¢ä½¿ç”¨æµè§ˆå™¨F12çœ‹ä¸€ä¸‹å®é™…çš„è¯·æ±‚ä¿¡æ¯ï¼š</p>
<p><img src="http://cdn.tycoding.cn/20200629094105.png" alt></p>
<p><img src="http://cdn.tycoding.cn/20200629094110.png" alt></p>
<p>å¦‚æœç™»å½•è¯·æ±‚å“åº”æˆåŠŸï¼Œæƒ³è¦è¿›å…¥ç³»ç»Ÿçš„ç¬¬äºŒå…³å°±æ˜¯è°ƒç”¨è·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼Œå…¨å±€è®¾ç½®ç”¨æˆ·ä¿¡æ¯(ç”¨æˆ·åã€å¤´åƒâ€¦) ã€‚æ‰€ä»¥ï¼Œ<code>vue-admin-template</code>ä¼šç«‹å³å†è¯·æ±‚è·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼š</p>
<p><img src="http://cdn.tycoding.cn/20200629094116.png" alt></p>
<p>å¯çœ‹åˆ°ï¼Œå¦‚æœç™»å½•æˆåŠŸï¼Œå¯æºå¸¦<code>access_token</code>è®¿é—®åº”ç”¨çš„å…¶ä»–æ¥å£ï¼Œåªéœ€è¦åœ¨è¯·æ±‚æ—¶å°†è¯·æ±‚å¤´<code>Authorization</code>è®¾ç½®ä¸º<code>access_token</code>ä¿¡æ¯å³å¯ã€‚</p>
<h2 id="CRUDä¸šåŠ¡"><a href="#CRUDä¸šåŠ¡" class="headerlink" title="CRUDä¸šåŠ¡"></a>CRUDä¸šåŠ¡</h2><p>ä¸€æ—¦è§£å†³äº†ç™»å½•åŠŸèƒ½ï¼Œç›¸ä¿¡ä½ å¯¹<code>vue-admin-template</code>è¿™ä¸ªå‰ç«¯æ¨¡æ¿é¡¹ç›®æœ‰ä¸€å®šç†è§£äº†ï¼Œåç«¯å…¶ä»–çš„ä¸šåŠ¡ä¹Ÿç›¸å¯¹ç®€å•å¾ˆå¤šäº†ã€‚æ¶‰åŠAxiosè¯·æ±‚éƒ¨åˆ†ï¼Œåªéœ€è¦å…³æ³¨ï¼š</p>
<ol>
<li><code>src/views</code> ä¸‹å®šä¹‰ <code>.vue</code> ç»„ä»¶</li>
<li><code>src/api</code> ä¸‹å®šä¹‰APIæ¥å£ä¿¡æ¯</li>
</ol>
<h3 id="æ —å­"><a href="#æ —å­" class="headerlink" title="æ —å­"></a>æ —å­</h3><p>ä¸¾ä¾‹ï¼šæ ¹æ®IDè·å–ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½</p>
<ol>
<li>åœ¨<code>src/api/user.js</code>ä¸­å®šä¹‰æ ¹æ®IDè·å–ç”¨æˆ·ä¿¡æ¯çš„APIæ¥å£</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">findById</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    url: <span class="string">'/admin/user/'</span> + id,</span><br><span class="line">    method: <span class="string">'get'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨<code>.vue</code>ç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªAPIæ¥å£</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column align=<span class="string">"center"</span> label=<span class="string">"Actions"</span>&gt;</span><br><span class="line">	&lt;template slot-scope=<span class="string">"scope"</span>&gt;</span><br><span class="line">		&lt;el-button type=<span class="string">"danger"</span> @click=<span class="string">"handleDel(scope.row.id)"</span> icon=<span class="string">"el-icon-delete"</span> size=<span class="string">"mini"</span>&gt;åˆ é™¤&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>template&gt;</span><br><span class="line">&lt;<span class="regexp">/el-table-column&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">  import &#123; findById &#125; from '@/</span>api/user<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  export default &#123;</span></span><br><span class="line"><span class="string">    components: &#123;Pagination, Save&#125;,</span></span><br><span class="line"><span class="string">    data() &#123;</span></span><br><span class="line"><span class="string">      return &#123;</span></span><br><span class="line"><span class="string">        form: null,</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    methods: &#123;</span></span><br><span class="line"><span class="string">      handleEdit(id) &#123;</span></span><br><span class="line"><span class="string">        findById(id).then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">          this.form = response.data;</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå³å¯å®ç°æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ</p>
<h2 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h2><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨Vue+ElementUIå®ç°åˆ†é¡µæŸ¥è¯¢ç»éªŒçš„æœ‹å‹å¯ä»¥å…ˆçœ‹ä¸‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://www.tycoding.cn/2018/07/30/vue/vue-6/">Vue+ElementUI+SpringMVCå®ç°åˆ†é¡µ</a></p>
<p><code>vue-admin-template</code>çš„ä½œè€…å…¶å®æä¾›å¥½äº†ä¸€ä¸ª<code>pagination</code>åˆ†é¡µç»„ä»¶ï¼Œæ˜¯å¯¹Element-UIçš„<code>&lt;el-pagination&gt;</code>æ§ä»¶çš„å°è£…ã€‚ä½œè€…å°è£…çš„è¿™ä¸ªç»„ä»¶æ˜¯é€šç”¨çš„ï¼Œå¯ä»¥åœ¨é¡¹ç›®çš„ä»»ä½•éœ€è¦åˆ†é¡µçš„ä½ç½®ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦‚ä½•é£Ÿç”¨å‘¢ï¼Ÿ</p>
<ol>
<li>åœ¨<code>src/components</code>ä¸‹å¼•å…¥è¯¥ç»„ä»¶</li>
</ol>
<p><img src="http://cdn.tycoding.cn/20200629094122.png" alt></p>
<ol start="2">
<li>åœ¨<code>src/api/user.js</code>ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢æ¥å£</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getList</span>(<span class="params">query, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    url: <span class="string">'/admin/user/list?pageCode='</span> + query.page + <span class="string">'&amp;pageSize='</span> + query.limit,</span><br><span class="line">    method: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼š<code>pageCode</code>å½“å‰é¡µç ã€<code>pageSize</code>æ¯é¡µå¤šå°‘è®°å½•ã€<code>data</code>æŸ¥è¯¢æ¡ä»¶</p>
<ol start="3">
<li>åœ¨éœ€è¦ä½¿ç”¨åˆ†é¡µçš„ç»„ä»¶ä¸­å¼•å…¥è¯¥åˆ†é¡µç»„ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;pagination v-show=<span class="string">"total&gt;0"</span> :total=<span class="string">"total"</span> :page.sync=<span class="string">"listQuery.page"</span> :limit.sync=<span class="string">"listQuery.limit"</span></span><br><span class="line">            @pagination=<span class="string">"fetchData"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">pagination</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123;getList&#125; <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line">  <span class="keyword">import</span> Pagination <span class="keyword">from</span> <span class="string">'@/components/Pagination'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components: &#123;Pagination&#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        list: <span class="literal">null</span>,</span><br><span class="line">        search: &#123;&#125;,</span><br><span class="line">        listQuery: &#123;</span><br><span class="line">          page: <span class="number">1</span>,</span><br><span class="line">          limit: <span class="number">20</span>,</span><br><span class="line">          importance: <span class="literal">undefined</span>,</span><br><span class="line">          title: <span class="literal">undefined</span>,</span><br><span class="line">          type: <span class="literal">undefined</span>,</span><br><span class="line">          sort: <span class="string">'+id'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        total: <span class="number">0</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      <span class="keyword">this</span>.fetchData()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      fetchData() &#123;</span><br><span class="line">        getList(<span class="keyword">this</span>.listQuery, <span class="keyword">this</span>.search).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.list = response.data.rows</span><br><span class="line">          <span class="keyword">this</span>.total = response.data.total</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼š<code>listQuery</code>åˆ†é¡µæ¡ä»¶ã€<code>search</code>æŸ¥è¯¢æ¡ä»¶ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´åˆ†é¡µæŸ¥è¯¢ï¼š</p>
<ul>
<li>å‰ç«¯éœ€è¦ä¼ é€’çš„å‚æ•°ï¼š<code>pageCode</code>: å½“å‰é¡µç ã€<code>pageSize</code>ï¼šæ¯é¡µå¤šå°‘æ¡è®°å½•ã€‚å¦‚æœéœ€è¦æ¡ä»¶æŸ¥è¯¢å†ä¼ é€’æŸ¥è¯¢æ¡ä»¶</li>
<li>åç«¯éœ€è¦è¿”å›çš„å‚æ•°ï¼š<code>total</code>ï¼šæ•°æ®åº“æ€»è®°å½•æ•°ã€<code>List&lt;T&gt;</code>ï¼šå°è£…äº†æŸ¥è¯¢åˆ°çš„æ•°æ®é›†åˆ</li>
</ul>
<p>å¯ä»¥çœ‹ä¸‹åç«¯çš„ä»£ç å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Controller</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result&lt;Map&gt; <span class="title">list</span><span class="params">(SysUser user, QueryPage queryPage)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Result&lt;Map&gt;(<span class="keyword">this</span>.selectByPageNumSize(queryPage, () -&gt; sysUserService.list(user)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// QueryPage</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryPage</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageCode; <span class="comment">//å½“å‰é¡µ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageSize; <span class="comment">//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»„ä»¶ä¼ å€¼"><a href="#ç»„ä»¶ä¼ å€¼" class="headerlink" title="ç»„ä»¶ä¼ å€¼"></a>ç»„ä»¶ä¼ å€¼</h2><p>å®é™…é¡¹ç›®ä¸­ï¼Œç»å¸¸ä½¿ç”¨ç»„ä»¶ä¼ å€¼ã€‚æ¯”å¦‚ï¼šç”¨æˆ·ç®¡ç†æ¨¡å—ä¸­ï¼Œç¼–è¾‘åŠŸèƒ½é€šå¸¸éœ€è¦ä¸€ä¸ªå¼¹å‡ºçª—ï¼Œè€Œè¿™ä¸ªå¼¹å‡ºçª—é€šå¸¸æ˜¯æŠ½å–åœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ä¸­ï¼Œè¿™æ ·å°±æ¶‰åŠåˆ°äº†çˆ¶ç»„ä»¶ ( ç”¨æˆ·ç®¡ç†ç»„ä»¶ ) å’Œå­ç»„ä»¶ ( ç¼–è¾‘åŠŸèƒ½ç»„ä»¶ ) çš„é€šä¿¡ï¼›ç®€å•æ¥è¯´ï¼Œåœ¨ç”¨æˆ·ç®¡ç†ç»„ä»¶ä¸­éœ€è¦æ§åˆ¶ç¼–è¾‘åŠŸèƒ½å¼¹å‡ºæ¡†çš„å¼¹å‡ºå’Œå…³é—­ç­‰æ“ä½œã€‚</p>
<h3 id="æ¦‚å¿µå¼•å…¥"><a href="#æ¦‚å¿µå¼•å…¥" class="headerlink" title="æ¦‚å¿µå¼•å…¥"></a>æ¦‚å¿µå¼•å…¥</h3><h4 id="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"><a href="#çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"></a>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼</h4><p>æ¯”å¦‚åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰å­ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;son :info=<span class="string">"msg"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆåœ¨ç»„ä»¶ä¸­è·å–åˆ°è¿™ä¸ª<code>info</code>ä¸­çš„æ•°æ®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;&#125;,</span><br><span class="line">props: [<span class="string">'info'</span>]</span><br></pre></td></tr></table></figure>

<p>å³å¯è·å–åˆ°çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„æ•°æ®ï¼Œæ³¨æ„ï¼šè¿™ä¸ª<code>props</code>å±äº<code>new vue()</code>æ ¹è·¯å¾„ä¸‹çš„å±æ€§ï¼Œä¸å±äº<code>data</code>ã€‚å¦‚æœè·å–çˆ¶ç»„ä»¶ä¼ è¿›æ¥çš„å¤šä¸ªæ“¦ä¹¦ï¼Œä½¿ç”¨é€—å·éš”å¼€å³å¯è·å–ã€‚</p>
<h4 id="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"><a href="#å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼" class="headerlink" title="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"></a>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼</h4><p>åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;son @func=<span class="string">"getMsg"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Vueå®ä¾‹</span></span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">//çˆ¶ç»„ä»¶æ³¨å†Œçš„æ–¹æ³•ï¼Œå­ç»„ä»¶é€šè¿‡`this.$emit()`çš„æ–¹å¼è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†å‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„valã€‚</span></span><br><span class="line">  getMsg(val) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"è¿™æ˜¯å­ç»„ä»¶ä¼ é€’æ¥çš„æ•°æ®ï¼š"</span> + val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆåœ¨å­ç»„ä»¶ä¸­é€šè¿‡<code>this.$emit(&#39;æ–¹æ³•å&#39;, è¦ä¼ é€’çš„æ•°æ®)</code>çš„æ–¹å¼è°ƒç”¨çˆ¶ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œä¼ é€’æ•°æ®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"button"</span> value=<span class="string">"å‘çˆ¶ç»„ä»¶ä¼ å€¼"</span> @click=<span class="string">"sendMsg"</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Vueå®ä¾‹</span></span><br><span class="line">methods: &#123;</span><br><span class="line">  sendMsg() &#123;</span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'func'</span>, <span class="string">'æˆ‘æ˜¯æ¥è‡ªå­ç»„ä»¶çš„æ•°æ®'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="refs"><a href="#refs" class="headerlink" title="$refs"></a>$refs</h4><p><code>this.$refs</code>å¯ä»¥è·å–å…ƒç´ å’Œç»„ä»¶ï¼ˆä»¥åŠç»„ä»¶ä¸­çš„å…ƒç´ ï¼‰ã€‚</p>
<ul>
<li>å¦‚æœåœ¨HTMLä¸­å®šä¹‰äº† <code>ref=&quot;xx&quot;</code> é‚£ä¹ˆåœ¨Vueå®ä¾‹ä¸­é€šè¿‡<code>this.$refs.xx</code>å°±èƒ½è·å–åˆ°å½“å‰å®šä¹‰<code>ref=&quot;xx&quot;</code>çš„DOMå…ƒç´ ã€‚</li>
<li>å¦‚æœåœ¨ç»„ä»¶å¼•ç”¨ä¸Šï¼ˆæ¯”å¦‚<code>&lt;son ref=&quot;xx&quot;&gt;</code>ï¼‰ä¸Šä½¿ç”¨äº†<code>ref</code>ï¼Œé‚£ä¹ˆåœ¨çˆ¶ç»„ä»¶Vueå®ä¾‹ä¸­é€šè¿‡<code>this.$refs</code>è·å–åˆ°çš„æ˜¯æ•´ä¸ªå­ç»„ä»¶çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡<code>.</code>çš„æ–¹å¼è°ƒç”¨å­ç»„ä»¶<code>data</code>å’Œ<code>methods</code>ä¸­ç»‘å®šæ•°æ®ã€‚</li>
</ul>
<h3 id="æ —å­-1"><a href="#æ —å­-1" class="headerlink" title="æ —å­"></a>æ —å­</h3><ol>
<li>é™¤äº†åˆ›å»ºç”¨æˆ·ç®¡ç†çš„ç»„ä»¶ï¼Œæ–°å¢ä¸€ä¸ªå°è£…äº†ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘æ¡†çš„ç»„ä»¶ï¼š</li>
</ol>
<p><img src="http://cdn.tycoding.cn/20200629094131.png" alt></p>
<p>å…¶ä¸­çš„<code>save.vue</code>å°±æ˜¯å°è£…äº†ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘æ¡†çš„ç»„ä»¶ã€‚</p>
<ol start="2">
<li>åœ¨ç”¨æˆ·ç®¡ç†ç»„ä»¶ä¸­å¼•å…¥ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘æ¡†çš„ç»„ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;save :sonData=<span class="string">"form"</span> @sonStatus=<span class="string">"status"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">save</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> Save <span class="keyword">from</span> <span class="string">'./save'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components: &#123;Save&#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        form: <span class="literal">null</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      <span class="keyword">this</span>.fetchData()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      fetchData() &#123;</span><br><span class="line">        getList(<span class="keyword">this</span>.search).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      handleEdit(id) &#123;</span><br><span class="line">        findById(id).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.form = response.data;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//å­ç»„ä»¶çš„çŠ¶æ€Flagï¼Œå­ç»„ä»¶é€šè¿‡`this.$emit('sonStatus', val)`ç»™çˆ¶ç»„ä»¶ä¼ å€¼</span></span><br><span class="line">      <span class="comment">//çˆ¶ç»„ä»¶é€šè¿‡`@sonStatus`çš„æ–¹æ³•`status`ç›‘å¬åˆ°å­ç»„ä»¶ä¼ é€’çš„å€¼</span></span><br><span class="line">      status(data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (data) &#123;</span><br><span class="line">          <span class="keyword">this</span>.fetchData();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œå¦‚æœçˆ¶ç»„ä»¶<code>index.vue</code>æƒ³è¦ç»™å­ç»„ä»¶<code>save.vue</code>ä¼ å€¼ï¼Œæ¯”å¦‚ä¿®æ”¹ä¿¡æ¯ä¼šåœ¨çˆ¶ç»„ä»¶<code>index.vue</code>ä¸­è§¦å‘ç¼–è¾‘æŒ‰é’®ï¼Œè§¦å‘äº‹ä»¶å»æ ¹æ®IDæŸ¥è¯¢è¯¥ç”¨æˆ·ä¿¡æ¯ï¼Œè®©åå°†ä¿¡æ¯ç»‘å®šåˆ°å­ç»„ä»¶<code>save.vue</code>æ¨¡æ€æ¡†ä¸Šï¼Œæœ€ååœ¨ç¼–è¾‘æ¨¡æ€æ¡†ä¸Šä¿®æ”¹å®Œäº†ç”¨æˆ·æ•°æ®ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®æäº¤ä¿®æ”¹åçš„æ•°æ®ï¼Œå¦‚æ­¤ç¼–è¾‘åŠŸèƒ½å°±å®ç°äº†ã€‚</p>
<p>So</p>
<p>çˆ¶ç»„ä»¶<code>index.vue</code>ç»™å­ç»„ä»¶<code>save.vue</code>ä¼ é€’å€¼ï¼Œä»…éœ€è¦åœ¨å­ç»„ä»¶çš„å®ä¾‹ä¸Šå†™ <code>:aa=&quot;bb&quot;</code> å³å¯ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>aa</code>æ˜¯ä¼ é€’çš„æ•°æ®çš„keyå€¼ï¼Œåœ¨å­ç»„ä»¶<code>save.vue</code>ä¸­å¯ç”¨<code>props: [&#39;aa&#39;]</code>æ¥æ”¶åˆ°ã€‚( å®æ—¶ç›‘å¬ )</li>
<li><code>bb</code>æ˜¯valueå€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ã€‚( å®æ—¶æ›´æ–°ï¼Œå®æ—¶ä¼ é€’ç»™å­ç»„ä»¶ )</li>
</ul>
<p>å­ç»„ä»¶å¯é€šè¿‡<code>props: [&#39;aa&#39;]</code>å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œä½†æ˜¯è¦å®æ—¶ç»‘å®šåˆ°<code>save.vue</code>ä¿®æ”¹ä¿¡æ¯çš„è¡¨å•ä¸Šè¿˜éœ€è¦ç›‘å¬ä¸€ä¸‹ï¼Œæ‰€ä»¥åœ¨å­ç»„ä»¶ä¸Šï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//`props`ä¸å±äºdataï¼Œä½†æ˜¯`props`ä¸­çš„å‚æ•°å¯ä»¥åƒdataä¸­çš„å‚æ•°ä¸€æ ·ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">props: [<span class="string">'sonData'</span>],</span><br><span class="line">    </span><br><span class="line">watch: &#123;</span><br><span class="line">  <span class="string">'sonData'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.form = newVal</span><br><span class="line">    <span class="keyword">this</span>.dialogVisible = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (newVal.id != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.dialogTitle = <span class="string">'Edit'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¦‚æœçˆ¶ç»„ä»¶ä¼ é€’çš„å€¼<code>sonData</code>æ”¹å˜äº†ï¼Œå°±è¯æ˜ç”¨æˆ·ç‚¹å‡»äº†ç¼–è¾‘/æ–°å¢æŒ‰é’®ï¼Œç«‹å³å°†ä¼ é€’æ¥çš„å€¼ç»‘å®šåˆ°è¡¨å•å¯¹è±¡<code>form</code>ä¸Šï¼Œå¹¶æ‰“å¼€æ¨¡å—æ¡†<code>diaalogVisible=true</code></p>
<p>å¦‚æœå­ç»„ä»¶<code>save.vue</code>ç¼–è¾‘å®Œç”¨æˆ·æ•°æ®å¹¶æ›´æ–°äº†ï¼ŒæŒ‰ç…§å¸¸ç†ï¼Œæ­¤æ—¶åº”è¯¥ç«‹å³åˆ·æ–°ç”¨æˆ·åˆ—è¡¨æ•°æ®ä»¥è·å–æœ€æ–°çš„æ•°æ®ã€‚é‚£ä¹ˆå°±æ¶‰åŠåˆ°å­ç»„ä»¶<code>save.vue</code>ç»™çˆ¶ç»„ä»¶<code>index.vue</code>ä¼ å€¼ã€‚</p>
<p>So</p>
<p>å­ç»„ä»¶<code>save.vue</code>ç»™çˆ¶ç»„ä»¶<code>index.vue</code>ä¼ é€’å€¼ï¼Œä»…éœ€è¦åœ¨çˆ¶ç»„ä»¶<code>index.vue</code>ä¸Šå®šä¹‰çš„å­ç»„ä»¶<code>save.vue</code>å®ä¾‹ä¸Šå†™ï¼š<code>@sonStatus=&quot;status&quot;</code>ï¼Œè¿™å°±å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’å€¼<code>status</code>ï¼š</p>
<ul>
<li>åœ¨å­ç»„ä»¶<code>save.vue</code>ä¸­å†™<code>this.$emit(&#39;sonStatus&#39;, val)</code>ä¼šç«‹å³æ”¹å˜çˆ¶ç»„ä»¶<code>index.vue</code>ä¸­ç»‘å®šçš„å¯¹è±¡<code>status</code></li>
<li>åœ¨çˆ¶ç»„ä»¶<code>index.vue</code>ä¸­å­ç»„ä»¶ä¼ é€’å€¼å®é™…ç»‘å®šçš„æ˜¯ä¸€ä¸ªæ–¹æ³•<code>status</code>ï¼Œè¿™ä¸ªæ–¹æ³•ä¼ é€’ä¸€ä¸ªå€¼ä¹Ÿæ˜¯å­ç»„ä»¶ä¼ é€’æ¥çš„å€¼</li>
</ul>
<p>å­ç»„ä»¶é€šè¿‡<code>this.$emit(&#39;sonStatus&#39;, val)</code>ä¼šå¼ºåˆ¶çˆ¶ç»„ä»¶<code>index.vue</code>ä¸­æ”¹å˜ç»‘å®šçš„å€¼ï¼Œæ˜¯å®æ—¶ç›‘å¬çš„ã€‚è€Œçˆ¶ç»„ä»¶<code>index.vue</code>å¯¹åº”ç»‘å®šçš„æ˜¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡<code>status()</code>ï¼Œä¸åŒäºçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼ï¼Œå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼é€šè¿‡æ–¹æ³•å¯¹è±¡ç»‘å®šï¼Œè¿™ä¸ªæ–¹æ³•å°±ç›¸å½“äº<code>watch</code>å®æ—¶ç›‘å¬å€¼çš„æ”¹å˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">status(data) &#123;</span><br><span class="line">  <span class="keyword">if</span> (data) &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œä¸€æ—¦å­ç»„ä»¶å‘Šè¯‰çˆ¶ç»„ä»¶ï¼Œæˆ‘å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œä½ éœ€è¦æ›´æ–°äº†ã€‚æ­¤æ—¶çˆ¶ç»„ä»¶çš„<code>status</code>æ–¹æ³•ä¼šç«‹å³é‰´å®šåˆ°å€¼çš„å˜åŒ–å¹¶ç«‹å³è§¦å‘ä¼ æ–¹æ³•<code>fetchData()</code>åˆ·æ–°è¡¨æ ¼æ•°æ®ã€‚</p>
<h2 id="å·¦ä¾§è·¯ç”±å¯¼èˆª"><a href="#å·¦ä¾§è·¯ç”±å¯¼èˆª" class="headerlink" title="å·¦ä¾§è·¯ç”±å¯¼èˆª"></a>å·¦ä¾§è·¯ç”±å¯¼èˆª</h2><p><code>vue-admin-template</code>ä¸­ä½œè€…ä¹Ÿå°è£…äº†è·¯ç”±å’Œä¾§è¾¹æ ï¼Œå…·ä½“ä»‹ç»çœ‹ä½œè€…çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/essentials/router-and-nav.html" target="_blank" rel="noopener">è·¯ç”±å’Œä¾§è¾¹æ </a></p>
<p>å¦‚æœæˆ‘ä»¬æƒ³å¢åŠ ç»„ä»¶ ( é¡µé¢ )ï¼Œéœ€è¦ä»¥ä¸‹å‡ æ­¥å³å¯å®ç°ï¼š</p>
<ol>
<li>åœ¨<code>src/views/</code>ä¸‹æ–°å¢ä¸€ä¸ª<code>.vue</code>ç»„ä»¶</li>
</ol>
<p><img src="http://cdn.tycoding.cn/20200629094140.png" alt></p>
<ol start="2">
<li>åœ¨<code>src/router/index.js</code>ä¸‹æ–°å¢ä¸€æ¡è·¯ç”±ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/admin'</span>,</span><br><span class="line">  component: Layout,</span><br><span class="line">  redirect: <span class="string">'/admin/user'</span>,</span><br><span class="line">  name: <span class="string">'æƒé™ç®¡ç†'</span>,</span><br><span class="line">  meta: &#123; <span class="attr">title</span>: <span class="string">'æƒé™ç®¡ç†'</span>, <span class="attr">icon</span>: <span class="string">'example'</span> &#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'user'</span>,</span><br><span class="line">      name: <span class="string">'ç”¨æˆ·ç®¡ç†'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/user/index'</span>),</span><br><span class="line">      meta: &#123; <span class="attr">title</span>: <span class="string">'ç”¨æˆ·ç®¡ç†'</span>, <span class="attr">icon</span>: <span class="string">'table'</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œä¸€æ—¦åœ¨<code>router/index.js</code>ä¸­æ–°å¢äº†ä¸€æ¡è·¯ç”±å¯¼èˆªï¼Œä¾§è¾¹æ ä¼šè‡ªåŠ¨æ¸²æŸ“ä¸€ä¸ªå¯¼èˆªã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><code>path</code> è¯¥è·¯ç”±çš„URLç›¸å¯¹åœ°å€</li>
<li><code>component</code> å±•ç¤ºåœ¨å“ªä¸ªç»„ä»¶ä¸Šï¼Œ<code>src/layout</code>æ˜¯æ•´ä¸ªå‰ç«¯é¡¹ç›®çš„å¸ƒå±€éª¨æ¶ï¼Œæ‰€ä»¥æ‰€æœ‰çš„å­ç»„ä»¶éƒ½è¦æ˜¾ç¤ºåœ¨è¯¥éª¨æ¶ä¸Š</li>
<li><code>children</code> äºŒçº§å¯¼èˆªç›®å½•ï¼Œå¦‚æœä¸éœ€è¦äºŒçº§ç›®å½•ï¼Œå°±æ— éœ€å®šä¹‰æ­¤èŠ‚ç‚¹</li>
<li><code>component =&gt; import</code> è¯¥è·¯ç”±å¯¹åº”çš„ç»„ä»¶ä½ç½® </li>
</ul>
<br>

<h1 id="äº¤æµ"><a href="#äº¤æµ" class="headerlink" title="äº¤æµ"></a>äº¤æµ</h1><p>QQGroupï¼š671017003   </p>
<p>WeChatGroup:  å…³æ³¨å…¬ä¼—å·æŸ¥çœ‹</p>
<h1 id="è”ç³»"><a href="#è”ç³»" class="headerlink" title="è”ç³»"></a>è”ç³»</h1><ul>
<li><a href="http://www.tycoding.cn">Blog@TyCodingâ€™s blog</a></li>
<li><a href="https://github.com/TyCoding" target="_blank" rel="noopener">GitHub@TyCoding</a></li>
<li><a href="https://www.zhihu.com/people/tomo-83-82/activities" target="_blank" rel="noopener">ZhiHu@TyCoding</a></li>
</ul>

      
    </div>

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/qrcode_for_gh.jpg" alt="TyCoding wechat" style="width: 200px; max-width: 100%;">
    <div>æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¶‚é™Œ</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¸®åŠ©åˆ°äº†ä½ ï¼Œä½ å¯ä»¥å¸®ä½œè€…ä¹°ä¸€æ¯æœæ±è¡¨ç¤ºé¼“åŠ±</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.png" alt="TyCoding WeChat Pay">
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="TyCoding Alipay">
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/spring-cloud/" rel="tag"># spring-cloud</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/23/boot/spring-boot-security-oauth2-db/" rel="next" title="Spring Security OAuth2æ•°æ®æŒä¹…åŒ–">
                <i class="fa fa-chevron-left"></i> Spring Security OAuth2æ•°æ®æŒä¹…åŒ–
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/30/cloud/cloud-template-api/" rel="prev" title="Spring Cloud Templateå¾®æœåŠ¡åç«¯">
                Spring Cloud Templateå¾®æœåŠ¡åç«¯ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>

  <hr>


    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
    
  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element" style="opacity: 1; display: block; transform: translateX(0px);">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Contents</li>
          <li class="sidebar-nav-overview" data-target="site-overview">Overview</li>
        </ul>
      

  

      <section class="site-overview sidebar-panel">
        <div class="site-overview">
          <div class="sidebar-sticky sticky">
            <div itemscope itemtype="http://schema.org/Person">
              <div class="author__avatar">
                
                  <img itemprop="image" src="/images/avatar.jpg" alt="TyCoding"> 
                
              </div>
              <div class="author__content">
                <h3 class="author__name" itemprop="name">TyCoding</h3>
                <p class="author__bio" itemprop="description">Life is short, just coding</p>
              </div>
              
                <div class="author__urls-wrapper">
                  <button class="btn btn--inverse">Follow</button>
                  <ul class="author__urls social-icons">
                    
                      <li>
                        <a href="https://github.com/TyCoding" target="_blank" title="GitHub">
                            
                              <i class="fa fa-fw fa-github"></i>&nbsp;&nbsp;GitHub</a>
                      </li>
                    
                      <li>
                        <a href="https://github.com/TyCoding/tumo" target="_blank" title="Tumo">
                            
                              <i class="fa fa-fw fa-link"></i>&nbsp;&nbsp;Tumo</a>
                      </li>
                    
                      <li>
                        <a href="https://github.com/TyCoding/cloud-template" target="_blank" title="SpringCloud">
                            
                              <i class="fa fa-fw fa-cloud"></i>&nbsp;&nbsp;SpringCloud</a>
                      </li>
                    
                      <li>
                        <a href="https://github.com/TyCoding/tumo-next" target="_blank" title="Blog Theme">
                            
                              <i class="fa fa-fw fa-dashboard"></i>&nbsp;&nbsp;Blog Theme</a>
                      </li>
                    
                      <li>
                        <a href="https://tycoding.cn/cdn/music" target="_blank" title="Music">
                            
                              <i class="fa fa-fw fa-music"></i>&nbsp;&nbsp;Music</a>
                      </li>
                    
                      <li>
                        <a href="https://tycoding.cn/cdn/love" target="_blank" title="Love">
                            
                              <i class="fa fa-fw fa-heart"></i>&nbsp;&nbsp;Love</a>
                      </li>
                    

                    
                      <li class="menu-item menu-item-search">
                        
                          <a href="javascript:;" class="popup-trigger">
                          <i class="fa fa-fw fa-search"></i>&nbsp;&nbsp;
                        
                          
                          
                          Search
                        </a>
                      </li>
                    

                    
                      <div class="site-search">
                        
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



                      </div>
                    

                  </ul>
                </div>
              
            </div>
          </div>
        </div>
      </section>



      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Cloud-Template-åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ-â€“-å‰ç«¯"><span class="nav-number">1.</span> <span class="nav-text">Spring Cloud Template åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿ â€“ å‰ç«¯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¯å¢ƒå‡†å¤‡"><span class="nav-number">1.1.</span> <span class="nav-text">ç¯å¢ƒå‡†å¤‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å–æ¶ˆESLintæ ¡éªŒ"><span class="nav-number">1.1.1.</span> <span class="nav-text">å–æ¶ˆESLintæ ¡éªŒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç™»å½•åŠŸèƒ½"><span class="nav-number">1.2.</span> <span class="nav-text">ç™»å½•åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç™»å½•æ¥å£"><span class="nav-number">1.2.1.</span> <span class="nav-text">ç™»å½•æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµ‹è¯•"><span class="nav-number">1.2.2.</span> <span class="nav-text">æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CRUDä¸šåŠ¡"><span class="nav-number">1.3.</span> <span class="nav-text">CRUDä¸šåŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ —å­"><span class="nav-number">1.3.1.</span> <span class="nav-text">æ —å­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ†é¡µæŸ¥è¯¢"><span class="nav-number">1.4.</span> <span class="nav-text">åˆ†é¡µæŸ¥è¯¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç»„ä»¶ä¼ å€¼"><span class="nav-number">1.5.</span> <span class="nav-text">ç»„ä»¶ä¼ å€¼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¦‚å¿µå¼•å…¥"><span class="nav-number">1.5.1.</span> <span class="nav-text">æ¦‚å¿µå¼•å…¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#refs"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">$refs</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ —å­-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">æ —å­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å·¦ä¾§è·¯ç”±å¯¼èˆª"><span class="nav-number">1.6.</span> <span class="nav-text">å·¦ä¾§è·¯ç”±å¯¼èˆª</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äº¤æµ"><span class="nav-number">2.</span> <span class="nav-text">äº¤æµ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è”ç³»"><span class="nav-number">3.</span> <span class="nav-text">è”ç³»</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <a href="http://www.beian.miit.gov.cn/" target="_blank">è±«ICPå¤‡18015694å·</a>
<br>
<div class="copyright" style="display: inline-block">&copy; 2017 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="author" itemprop="copyrightHolder">TyCoding</span>

  
  &nbsp;&nbsp; | &nbsp;&nbsp;
</div>

        
<div class="busuanzi-count" style="display: inline-block">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      UV
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      PV
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    <div class="back-to-top">
      <span style="font-family:'Source Sans Pro','Helvetica Neue',Arial,sans-serif;font-size:1.2em;font-weight:600">TOP</span>
    </div>

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'RfrXFjpg2cghYo3z7dypcSdy-gzGzoHsz',
        appKey: 'JwNt0o6aEvm6WsQ78LGWFz06',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  


  <script type="text/javascript" src="/js/src/mo.min.js"></script>
  <script>$(function(){$("a").not(".nav-link,.cloud-tie-join-count,.ignore-href,.jstree-anchor").addClass("animsition-link")});var burst1=new mojs.Burst({left:0,top:0,radius:{5:40},children:{shape:"circle",fill:["red","cyan","orange"],fillOpacity:.8,radiusX:3.5,radiusY:3.5}});document.addEventListener("click",function(a){null==a.target.href&&"footer"!=a.target.className&&"copyright"!=a.target.className&&"author__urls social-icons"!=a.target.className&&"author__avatar"!=a.target.className&&"sidebar sidebar-active"!=a.target.className&&burst1.tune({x:a.pageX,y:a.pageY}).generate().replay()})</script>
  <div data-name="mojs-shape"></div>
</body>
</html>
